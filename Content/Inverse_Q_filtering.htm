<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head><title></title>
    </head>
    <body>
        <h1>Inverse Q filtering</h1>
        <h1 id="InverseQfiltering-1.Contents">1.&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Contents</h1>
        <p />
        <div class="toc-macro client-side-toc-macro  conf-macro output-block">
        </div>&#160;<h1 id="InverseQfiltering-2.ProcessOVERVIEW">2.&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Process OVERVIEW</h1><p><br /></p><p>Seismic absorption is commonly characterised by the quality factor Q. It is most often defined in terms of the maximum energy stored during a cycle, divided by the energy lost during the cycle. Lomnitz showed that for a linear system dispersion must always accompany absorption. This implies that the phase velocity can not be independent of frequency. Phase velocity increases with frequency. This gives rise to a nonstationary behaviour in the shape of the wavelets associated with reflection events at different times. Inverse Q filtering compensates for this. &#160;</p><p>The <strong>amplitude&#160;</strong><strong>attenuation</strong> of a frequency component in an absorptive medium can be described by</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" height="92" src="Resources/Images/image2018-10-12_11-3-49.png" /></span></p><p><span class="inline-comment-marker">where ω is the angular frequency, υ the velocity, </span><span class="inline-comment-marker"><span class="inline-comment-marker">A </span><sub><span class="inline-comment-marker">0</span></sub></span> the initial amplitude and A(x) the amplitude at the travelled distance x. Note: x/v=t</p><p>The <strong>velocity dispersion</strong> can be described by</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" height="97" src="Resources/Images/image2018-10-12_11-4-29.png" /></span></p><p>Where ω<sub>0</sub> is an arbitrary reference frequency.</p><p>Inverse filters can be calculated for these two equations to correct for attenuation and dispersion. Phase compensation is done using an algorithm similar to a Stolt migration (See Hargreaves 1987)</p><p><span class="inline-comment-marker">The <strong>phase</strong> part of Inverse Q is very stable and <span class="inline-comment-marker">doesn’t</span> need constraints for a stable inverse. The amplitude compensation operator is an exponential function of frequency and travel time and as a result, amplifies the noise level causing instabilities and artefacts. For this reason, there is a gain-limited inverse and <span class="inline-comment-marker">it is good practice to apply phase-only Q pre-migration</span> and leave the amplitude <span class="inline-comment-marker">part until</span> after migration.</span></p><h2 class="Textbody" id="InverseQfiltering-HowdoweestimateQ?">How do we estimate Q?</h2><ol><li>Client-supplied</li><li>Borehole measurements</li><li>4D reference survey may dictate</li><li>Vintage processing may dictate (i.e. to tie existing processed data the <span class="inline-comment-marker">reference frequency should be kept the same for all surveys</span>).</li><li>Spectral ratio method&#160; (There are other methods e.g. frequency shift, centroid frequency shift, match filter approach etc. These methods are not currently available)</li><li>Q tomography</li><li>Velocity-Q relationship</li></ol><h2 class="Textbody" id="InverseQfiltering-AdditionalinformationaboutQ">Additional information about Q</h2><h3 id="InverseQfiltering-Sensitivity"><strong>Sensitivity<br /></strong></h3><div class="confluence-information-macro confluence-information-macro-note conf-macro output-block"><div class="confluence-information-macro-body">Is it better to apply a constant Q which is perhaps not the correct value vs nothing at all?&#160; Yes</div></div><p>Q does not have to be known to great precision for significant benefits to be derived. If the Q value is between -25 to 50 % of its true value the residual phase error will be 33% of the real dispersion (See&#160;below). Further, the residual error will have a magnitude less than the magnitude of the original dispersion when Q is estimated above -50% of Q <em>(Duren and Trantham 1997 Exxon Mobil)</em></p><p>The error is shown to be the true original dispersion times a factor that depends on the percentage error in the Q estimate.</p><p><br /></p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" src="Resources/Images/image2018-10-12_12-57-8.png" /></span></p><p><br /></p><p class="Textbody">A good approximation for instantaneous (interval) Q is the interval velocity (m.s-1) multiplied with 0.01, which actually represent the harmonic mean of instantaneous Q values:</p><p class="Textbody"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" height="150" src="Resources/Images/image2018-10-12_12-58-48.png" /></span></p><p class="Textbody">Another relationship between interval Q and velocity was proposed by Waters (1978)</p><p class="Textbody"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" height="122" src="Resources/Images/image2019-3-5_13-15-16.png" /></span></p><p class="Textbody">where V<sub>p</sub> is expressed in feet/s.</p><p class="Textbody"><br /></p><p class="Textbody"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" height="250" src="Resources/Images/image2019-3-5_15-59-49.png" /></span><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" height="250" src="Resources/Images/image2019-3-5_15-59-58.png" /></span><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" height="250" src="Resources/Images/image2019-3-5_16-0-13.png" /></span></p><p class="Textbody"><em>Example of deriving an interval Q model (middle) from an interval velocity field (left) using the Waters equation. The image on the right is the effective Q&#160;converted from the derived interval Q model.</em></p><p class="Textbody"><br /></p><p class="Textbody">Typically, Q values increase with increasing time, but lower Q values can result, for example in unconsolidated shallow rock attenuating signal.</p><p class="Textbody"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" height="250" src="Resources/Images/image2018-10-12_12-59-28.png" /></span><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" src="Resources/Images/image2018-10-12_12-59-40.png" /></span></p><h1 class="Textbody" id="InverseQfiltering-3.Workflow&amp;Inputdatarequirements">3.&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Work flow &amp; Input data requirements</h1><h2 id="InverseQfiltering-Inputdata"><span style="color: rgb(0,51,102);">Input data</span></h2><p>Select appropriate reference workflow &amp; check input dataset requirements</p><ul><li>Ensure prior processing steps have been QC'd and signed off by the client.</li><li>Input da<span class="inline-comment-marker">ta: Sh</span><span style="letter-spacing: 0.0px;">ould be applied post SRME like processes because application of Q will be incorrect for multiples.</span></li><li>Select (Inner &amp; outer cable) for agreed project test lines</li><li>Gathers must be in time because the corrections are based on travel time</li><li>Should be applied to data without normal moveout because it corrects for attenuation/absorption due to travel time.</li><li>Should have water depth (in DEPTH) in “swdep” header</li><li>Can be applied to stacks if no gathers available, but the results will be less accurate<ul><li>Note: applying amplitude or phase Q to stacks will only do a correction relative to zero offset time.&#160; Any dispersion and attenuation due to travel-time and offset are not corrected for.</li><li>This means that applying inverse Q to angle stacks will correct the near angle stack but will be less effective as the angles get bigger. As a rule, it should not be applied to <span class="inline-comment-marker">angle stacks</span><span style="letter-spacing: 0.0px;"> but should be applied to pre-stack gathers instead.<br /></span></li></ul></li></ul><h1 id="InverseQfiltering-4.WorkBreakdown-Standardworkinstruction">4.&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Work Break down- Standard work instruction</h1><p class="Textbody">Workflow break-down to detail what steps are required to perform the role and task.</p><h2 id="InverseQfiltering-ApplicationofQ-compensation">Application of Q-compensation</h2><ol><li>Gathers must be in time because the corrections are based on travel times</li><li>Applied to data <strong>without</strong> normal moveout correction because it corrects for attenuation/absorption due to travel time.<ol><li>Ensure that migration moveout is backed off prior to application of Q-compensation or enable the "Input is moveout corrected" option where appropriate. Note that this option removes moveout internally.</li></ol></li><li>Input data should have water depth (in DEPTH) in “gwdep” header</li><li>Can be applied to stacks if no gathers available, however, the results will be less accurate</li><li><p class="Textbody"><span style="color: rgb(255,0,0);">Generate testing QC's defined in&#160;<a href="https://confluence.dug.com/pages/viewpage.action?pageId=18551835#InverseQfiltering-quality">Quality Control</a>&#160;section</span><span style="color: rgb(255,0,0);"><br /></span></p></li><li class="Textbody"><span style="color: rgb(255,102,0);">Review with Team Manager and/or AG</span></li><li class="Textbody"><span style="color: rgb(51,153,102);">Create testing QC summary presentation for external client approval</span></li></ol><p><br /></p><div class="confluence-information-macro confluence-information-macro-warning conf-macro output-block"><div class="confluence-information-macro-body"><ul><li>Applying amplitude or phase Q to stacks will only result in correction relative to zero offset time.&#160;</li><li>Any dispersion and attenuation due to travel time and offset are therefore not corrected for.</li><li>This means that applying inverse Q to angle stacks will correct the near angle stack but will be less effective as the angles get bigger.</li><li>As a rule, it should not be applied to&#160;angle stacks&#160;but should be applied to pre-stack gathers instead using the AVO-compliant option.</li></ul></div></div><p><br /></p><h1 id="InverseQfiltering-5.DUGInsightworkflow-Parameters&amp;Jobefficiency">5.&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; DUG Insight workflow - Parameters &amp; Job efficiency</h1><h2 id="InverseQfiltering-ReferenceWorkflow">Reference Workflow</h2><p>A typical workflow inverse Q workflow is shown below,&#160;</p><p class="Textbody"><em><span style="color: rgb(255,0,0);">Note the removal of NMO!</span></em></p><p class="Textbody"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-content-image-border" height="62" width="344" src="Resources/Images/image2019-2-12_10-12-19.png" /></span></p><p class="Textbody"><em>A typical workflow. <span style="color: rgb(255,0,0);">Note the removal of NMO!</span></em></p><h2 id="InverseQfiltering-Descriptionofkeyparameters-InverseQfilteringparameters">Description of key parameters - Inverse Q filtering parameters</h2><h3 id="InverseQfiltering-">&#160; &#160; &#160;<span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" src="Resources/Images/q_panel.png" /></span></h3><p><em>Q filter interface</em></p><p><strong>Volume:</strong>&#160;Input data to be filtered</p><p><strong>Mode:</strong> Phase only, Amplitude only, or Phase and Amplitude</p><p><strong>Direction:</strong> Choose "Apply Q Correction" to compensate for the anelastic losses (this will boost the high frequencies); Choose "Remove Q Correction" to remove the compensation.</p><p><strong>Q model:</strong>&#160; Constant Q</p><p style="margin-left: 30.0px;"><strong>Constant Q value:</strong> Enter the constant Q value to use for all traces and times. This is used in the constant Q source case (see below for Q value guidelines).</p><p><strong>Q model:</strong>&#160; Volume of time-varying effective Q</p><p style="margin-left: 30.0px;"><strong>Q volume type:</strong></p><p style="margin-left: 60.0px;"><strong><em> &#160;Matching trace for each input trace</em> </strong></p><p style="margin-left: 60.0px;">Each trace in the primary input volume is filtered using a corresponding trace from the Q volume. The Q volume in this case should be the same type as the primary input volume.</p><p style="margin-left: 60.0px;"><strong><em>Single trace per gather</em> </strong></p><p style="margin-left: 60.0px;">Each trace in a gather in the primary input volume is filtered using a single trace from the Q volume. The Q volume in this case should contain only a single trace per gather.</p><p style="margin-left: 60.0px;"><strong><em>Single trace</em> </strong></p><p style="margin-left: 60.0px;">Each trace in the primary input volume is filtered against the single trace found in the Q volume. If the input volume is a 3D volume you must specify a 3D Q volume for the single trace. If the input volume is a 2D volume you can specify a 3D volume or a 2D volume for the single trace Q volume. If you specify a 3D volume, the Q volume must contain a single trace which will be applied to all the input traces. If you specify a 2D volume, each line in the 2D Q volume must hold a single trace that will be applied to the traces in the matching line of the input volume</p><p style="margin-left: 60.0px;"><strong>Effective-Q Volume:</strong> The volume of effective-Q data to use.</p><p><br /></p><div class="confluence-information-macro confluence-information-macro-note conf-macro output-block"><div class="confluence-information-macro-body">All values of Q applied with inverse Q filtering are effective Q. Use the "q conversion" module to convert between interval and effective Q volumes</div></div><p><br /></p><p><strong>Reference frequency (Hz): </strong>Frequency of the seismic da<span class="inline-comment-marker">ta</span><strong><span class="inline-comment-marker">: </span></strong><span class="inline-comment-marker">G</span>ood to leave this around 45 to 50 Hz. This parameter has a small effect in "Amplitude only" mode due to compensation&#160;for the frequency dependence of the velocity used to convert depth to time.</p><p>The dispersion correction of the inverse Q-filter corrects the frequencies, which have all propagated at different velocities to the propagation at the velocity of the reference frequency. The reference frequency effectively defines the time frame of the output data.</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" src="Resources/Images/image2018-10-12_11-8-5.png" /></span></p><div class="confluence-information-macro confluence-information-macro-note conf-macro output-block"><div class="confluence-information-macro-body">If a high value of the reference frequency is specified, e.g.&#160; 10,000 Hz, the output seismic data can be corrected for positive drift (travel time differences between sonic logging frequencies and seismic frequencies), assuming that the Q values are chosen appropriately. However, the output data will be shifted up, and not tie other seismic lines that have not been processed with this reference frequency.</div></div><p>There is no correct choice of reference frequency.&#160; Before deghosting became standard practise the dominant frequency of the data was normally somewhere between 40 and 50Hz. To remove the distorting effects of dispersion from the seismic events without significantly shifting a reference frequency close to the dominant frequency was chosen. With broadband processing, the dominant frequency has shifted to the low end of the spectrum.&#160; To ensure there is no dramatic phase difference with most vintage processing, it is therefore recommended to keep the reference frequency at 50Hz if no other information (old processing, client decision etc.) dictates it.</p><p>It should be noted that the wave character change induced in the data by the dispersion correction is independent of the reference frequency.</p><p><br /></p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" alt="A. Input spikes (filtered) every 500ms" height="250" src="Resources/Images/image2018-10-12_11-9-6.png" title="A. Input spikes (filtered) every 500ms" /></span>  &#160;&#160;&#160; <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" height="250" src="Resources/Images/image2018-10-12_11-9-22.png" /></span>  &#160; <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" alt="Inverse Q filtered spikes." height="250" src="Resources/Images/image2018-10-12_11-9-36.png" title="Inverse Q filtered spikes." /></span></p><p><span style="color: rgb(23,43,77);"><em>Here we have input spikes every 500ms (filtered)&#160; on the left with attenuated spikes (Q=100; reference frequency=62.5Hz) in the middle.&#160;</em><em style="letter-spacing: 0.0px;">The right panel shows the attenuated spikes after inverse Q filtering using a reference frequency of 20000Hz on the left and 62.5Hz on the right.&#160;</em><em style="letter-spacing: 0.0px;">Note that the phase is the same but the higher frequency causes a shift up in-time&#160;of the events.</em></span></p><p><span style="color: rgb(23,43,77);"><strong>Stabilization Type:&#160; </strong>Gain limited or Gain limited with taper (If a taper is selected, a frequency value for the start of the taper needs to be specified).</span></p><p><span style="color: rgb(23,43,77);"><strong><span class="inline-comment-marker">Gain Stabilization Limit (dB):</span></strong><span class="inline-comment-marker"> This limits the amount of gain applied to the samples. This parameter has no effect in "Phase only" mode.</span></span></p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" height="250" src="Resources/Images/image2018-10-12_12-42-24.png" /></span><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" height="250" src="Resources/Images/image2018-10-12_12-42-35.png" /></span><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" height="250" src="Resources/Images/image2018-10-12_12-42-43.png" /></span><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" height="75" src="Resources/Images/image2018-10-12_12-42-55.png" /></span></p><p><em><span class="inline-comment-marker">Inverse Q filter amplitude responses at different times, 1000 msec (left), 2000 msec (middle) and 3000 msec (right). Note: smaller Q values result in higher boost, all using a Gain limit=20dB.</span></em></p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" height="250" src="Resources/Images/image2018-10-12_12-45-27.png" /></span></p><p><em>Inverse Q filter amplitude response at 2000ms Q=135 <span style="color: rgb(0,0,255);">Gain limit: 12</span>, <span style="color: rgb(0,255,0);">20</span>&#160; and <span style="color: rgb(255,0,0);">30dB</span></em></p><p><br /></p><div class="confluence-information-macro confluence-information-macro-warning conf-macro output-block"><div class="confluence-information-macro-body"><p>Using a gain limit that is too high will result in high-frequency noise being over-boosted.</p></div></div><p><br /></p><p><strong>Frequency for start of gain taper:</strong> This is the frequency that the taper on the gain limit starts. The limit is tapered to have no gain at Nyquist.</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" height="250" src="Resources/Images/image2018-12-12_11-20-1.png" /></span>  &#160;&#160; <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" height="250" src="Resources/Images/image2018-12-12_11-20-10.png" /></span></p><p>Inverse Q filter amplitude response at 1000ms (left) and 2000ms (right) Q=100 <span style="color: rgb(255,0,0);">Gain limit: 12</span>, <span style="color: rgb(0,255,0);">Gain limit with Taper</span>. The frequency for start of taper is 50Hz.</p><p><strong>Slope of taper (dB/Octave):</strong> Slope of the taper applied relative to the start frequency</p><p><strong>Apply reference time correction</strong></p><div class="confluence-information-macro confluence-information-macro-warning conf-macro output-block"><div class="confluence-information-macro-body">Please note: This should be applied to data&#160;<strong>without</strong>&#160;normal moveout correction because it corrects for attenuation/absorption due to travel time. The exception to this for AVO-compliant amplitude-only mode which has the option to specify that the data is moveout corrected and will internally remove the correction before applying Q.</div></div><h4 id="InverseQfiltering-Correctionmethod:RayTrace(recommended)"><strong>Correction method:&#160;</strong> Ray Trace (<span style="color: rgb(255,0,0);">recommended</span>)</h4><p>This method also removes the travel time through the water layer but is implemented with a 1D ray-tracing method and should be more accurate.</p><h4 style="margin-left: 30.0px;" id="InverseQfiltering-AVOcompliant"><strong>AVO compliant</strong></h4><p style="margin-left: 30.0px;">This option ensures that the amplitude correction is AVO compliant.&#160;</p><p style="margin-left: 30.0px;"><em>Inverse Q filters traditionally employ simple gain limits to prevent the over-amplification of high-frequencies at depth.&#160;It is a known issue (Trantham &amp; He, 2017) that due to travel time variations with offset, these gain limits can be reached at a lower frequency at far offsets compared to near offsets for a given reflected event which can distort AVO attributes.&#160;</em></p><p style="margin-left: 30.0px;"><em>DUG’s implementation of inverse Q employs a ray-tracing technique to ensure that frequency-dependent gains are consistent with correctly scaled amplitudes across all offsets resulting in gathers that are ideal for AVO analysis.&#160;</em></p><p style="margin-left: 30.0px;"><span>This implementation means that amplitude Q compensation can be safely applied to pre-stack data.</span></p><p style="margin-left: 30.0px;"><span>The AVO-compliant option is only available when “Apply reference-time correction” mode is enabled and set to “Ray Trace”.&#160;</span><span>Since it only affects the amplitude correction of the Q filter, it is operational for “Phase and Amplitude filtering” and&#160; “Amplitude only” modes.&#160;</span><span>There are essentially two steps in the AVO compliant correction both of which happen internally. The first step corrects for variation with offset. To maintain AVO compliance this step must use the same Q model as used in the inverse phase-only filtering (normally pre-migration).&#160;</span><span>The second step is the more traditional amplitude only inverse Q correction. Since the variation with offset is resolved the data is now AVO compliant and we are free to implement a Q model of our choice (regardless of what has been applied in the phase-only correction).&#160;</span><span>In this way, we can maintain AVO fidelity and still decouple the phase and amplitude corrections.</span></p><h4 style="margin-left: 30.0px;" id="InverseQfiltering-Inputdataismoveoutcorrected."><span><strong>Input data is moveout corrected.</strong> </span></h4><p style="margin-left: 30.0px;"><span>This is designed to avoid the extra steps in the post-migration flow of removing NMO before amplitude only Q and then re-applying NMO afterwards. This should be used by default for amplitude only inverse Q after migration. Note that a velocity volume is still required. For depth projects, this velocity should be V</span><span>nmo</span><span>. Q filter will internally remove NMO before applying Q and then re-applying NMO.</span></p><h4 id="InverseQfiltering-Correctionmethod:Xiamethod"><strong>Correction method:&#160;</strong> Xia method</h4><p>The travel time spent in the water (S<sub>w</sub> ) in the figure below, should be removed from the total travel time because there is very little attenuation in water.&#160; This is especially important for deep water areas and where the seafloor depth varies spatially.</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="400" src="Resources/Images/image2018-10-12_12-46-54.png" /></span></p><p>The method assumes straight rays and is implemented as shown below.</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="400" src="Resources/Images/image2018-10-12_12-47-6.png" /></span></p><p><br /></p><p><strong></strong></p><h1 id="InverseQfiltering-6.QualityControlquality">6.&#160; &#160; &#160; &#160; &#160;Quality Control&#160;</h1><p class="Textbody"><span style="color: rgb(0,0,0);">The typical QC displays generated during the&#160;<strong>testing</strong>&#160;process are summarised, this is to ensure the correct displays are available for sign-off by the client.</span></p><p class="Textbody"><span style="color: rgb(0,0,0);">Also, the list of standard&#160;<strong>production</strong>&#160;QCs are listed that ensure data is sufficiently quality checked before moving onto the next stage.</span></p><p class="Textbody"><span style="color: rgb(0,0,0);">A QC template containing examples of the required QC displays (numbered QC1,QC2 etc) can be found below:</span></p><h3 class="Textbody" id="InverseQfiltering-InverseQFiltering-TemplatePresentation"><a class="external-link" href="https://drive.google.com/open?id=1SHopT5AtrfuYvzJrc59mn-19-jcuHvf0" rel="nofollow">Inverse Q Filtering - Template Presentation</a></h3><p><br /></p><p class="Textbody"><br /></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 65.291%;"><colgroup><col style="width: 6.49351%;" /><col style="width: 93.5655%;" /></colgroup><tbody><tr><th class="highlight-red confluenceTh">No</th><th class="highlight-red confluenceTh">Data integrity checking</th></tr><tr><td class="confluenceTd"><p>&#160;1</p></td><td class="confluenceTd">Legacy data comparisons</td></tr><tr><td class="confluenceTd"><p>2&#160;</p></td><td class="confluenceTd"><p><span>Client reviewed and sign off parameters</span></p></td></tr><tr><td colspan="1" class="confluenceTd"><p><span>3&#160;</span></p></td><td colspan="1" class="confluenceTd"><p>Validate/discuss with the team/client if time/space-variant or Q-tomography is required</p></td></tr><tr><td class="confluenceTd"><p>4&#160;</p></td><td class="confluenceTd"><span>Match to well and synthetics/wavelet extraction (Optional, dependent on client, project, going to inversion)...</span></td></tr><tr><td colspan="1" class="confluenceTd">5</td><td colspan="1" class="confluenceTd">Check phase and amplitude compensation from near to far offsets on shots and CDP gathers..</td></tr></tbody></table></div><p><br /></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 65.5026%;"><colgroup><col style="width: 8.67902%;" /><col style="width: 91.2033%;" /></colgroup><tbody><tr><th class="highlight-red confluenceTh">No</th><th class="highlight-red confluenceTh">Standard Testing QC's</th></tr><tr><td class="confluenceTd"><p>QC1</p></td><td class="confluenceTd">Check amplitude spectrum shallow vs deep if amplitude Q</td></tr><tr><td class="confluenceTd"><p>QC2&#160;</p></td><td class="confluenceTd">Full, near, mid and far stacks with/without Q</td></tr><tr><td colspan="1" class="confluenceTd">QC3</td><td colspan="1" class="confluenceTd">Review application on shot &amp; CDP gathers</td></tr><tr><td colspan="1" class="confluenceTd">QC4</td><td colspan="1" class="confluenceTd">Review application on single offset/channel&#160;</td></tr></tbody></table></div><p><br /></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 65.6085%;"><colgroup><col style="width: 10.1336%;" /><col style="width: 89.7342%;" /></colgroup><tbody><tr><th class="highlight-red confluenceTh">No</th><th class="highlight-red confluenceTh">Standard Production QC's</th></tr><tr><td colspan="1" class="confluenceTd">PQC1</td><td colspan="1" class="confluenceTd"><br /></td></tr><tr><td class="confluenceTd"><p>PQC2&#160;</p></td><td class="confluenceTd"><br /></td></tr><tr><td class="confluenceTd"><p>PQC3&#160;</p></td><td class="confluenceTd"><br /></td></tr></tbody></table></div><p><br /></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 708.0px;"><colgroup><col style="width: 0.0px;" /><col style="width: 0.0px;" /></colgroup><tbody><tr><th class="highlight-red confluenceTh">Header used</th><th class="highlight-red confluenceTh">Purpose</th></tr><tr><td colspan="1" class="confluenceTd">GWDEP (In depth)</td><td colspan="1" class="confluenceTd">Used for reference time correction</td></tr></tbody></table></div><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 32.2126%;"><colgroup><col style="width: 36.0169%;" /><col style="width: 63.9831%;" /></colgroup><tbody><tr><th class="highlight-red confluenceTh">Header set</th><th class="highlight-red confluenceTh">Purpose</th></tr><tr><td class="confluenceTd"><p>nothing specific</p></td><td class="confluenceTd"><br /></td></tr></tbody></table></div><p><br /></p><h1 id="InverseQfiltering-7.CommonRisks&amp;Tips">7.&#160; &#160; &#160; &#160; &#160;Common Risks &amp; Tips</h1><p class="Textbody">Common risks associated with the process&#160;</p><ol><li class="Textbody">Using a <strong>reference frequency</strong> that is different from the <span class="inline-comment-marker">reference</span> frequency used for vintage data or other surveys will result in a mistie of these surveys.</li><li class="Textbody">Amplitude Q can boost high-frequency residual noise in the deeper section.</li><li class="Textbody">Comparing spectra before and after Q application can be confusing. In the pre deghosting days application of inverse Q filtering could change the apparent dominant frequency of the data. This is because the dominant frequency was always around 50 Hz due to constructive and destructive interference. With broad band data the spectrum is dominated by the low frequencies and the slope of frequency vs amplitude should decrease after inverse Q filtering. When comparing spectra it may be necessary to look at spectra in both dB and dB down. The following two pictures show some comparisons<br /><br /></li></ol><p class="Textbody"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" src="Resources/Images/image2019-1-23_11-51-12.png" /></span>  &#160; <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" src="Resources/Images/image2019-1-23_11-51-30.png" /></span></p><p class="Textbody">Amplitude spectra for a portion of a stacked section. (dB down (left) dB (right)&#160;(<span style="color: rgb(51,153,102);letter-spacing: 0.0px;">input&#160;</span>,<span style="color: rgb(153,51,0);">Q=100 gain limit 12dB,&#160;</span><span style="color: rgb(255,0,255);letter-spacing: 0.0px;">Q=100 gain limit 20dB </span>, <span style="color: rgb(0,0,128);letter-spacing: 0.0px;">Q=150 gain limit 20dB</span>)</p><p class="Textbody">Because energy is added the relative amplitude will change. One can therefore not compare amplitude directly in a dB plot.&#160; <span class="inline-comment-marker">For the dB down plot, it is easier to see that the high frequencies have been tilted.</span></p><p class="Textbody">For the pink curve, we see the dominant frequency changed. On a dB down plot, it seems like the low frequencies are reduced but the dB plot shows that the higher frequencies are probably overboosted. and the lows are <span class="inline-comment-marker">similar to the other tests.</span></p><p class="Textbody"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" src="Resources/Images/image2019-2-5_7-20-29.png" /></span></p><p class="Textbody">This picture shows the amplitude spectra before and after Q compensation for a shallow and a deep time window. Things to note are that the slopes of the amplitude decay with frequency is more similar after inverse Q filtering. Inverse Q filtering will tilt the slope towards a flatter slope. The relative amplitude level of the shallow and deep window are also more similar after Q compensation.</p><h1 id="InverseQfiltering-8.CaseStudiesandTechnicalReference">8.&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Case Studies and Technical Reference</h1><h2 class="Framecontents" id="InverseQfiltering-CaseStudies">Case Studies</h2><p><br /></p><p><br /></p><h2 class="Framecontents" id="InverseQfiltering-Referencepapers">Reference papers</h2><p><br /></p><p><strong>Sensitivity of dispersion correction to Q error</strong>&#160;</p><p>Duren and Trantham 1997</p><p><br /></p><p><strong>Dispersive Body Waves; Futterman JGR v67</strong></p><p>R.E.White Geophysics,Vol. 57, 1992</p><p><br /></p><p><strong>Proper time-referencing for prestack Q estimation and compensation</strong></p><p>G Xia (BP E&amp;P Technology)</p><p><br /></p><p><strong>Reflection Seismology</strong></p><p>Waters, K.H. [1978]: John Wiley and Sons, Inc.</p><p><br /></p><p><span class="confluence-embedded-file-wrapper conf-macro output-inline"><a class="confluence-embedded-file" href="Resources/Images/The accuracy of estimating Q from seismic data.pdf" aria-label="The accuracy of estimating Q from seismic data.pdf"><img src="https://confluence.dug.com/rest/documentConversion/latest/conversion/thumbnail/155354576/1" height="250" /></a></span></p><p><span class="confluence-embedded-file-wrapper conf-macro output-inline"><a class="confluence-embedded-file" href="Resources/Images/Proper time-referencing for prestack Q estimation and compensation.pdf" aria-label="Proper time-referencing for prestack Q estimation and compensation.pdf"><img src="https://confluence.dug.com/rest/documentConversion/latest/conversion/thumbnail/155354577/1" height="250" /></a></span></p><p><br /></p><p><br /></p><p><br /></p><h1 id="InverseQfiltering-Actions"><strong>Actions</strong></h1><ul class="inline-task-list"><li><span>Inverse Q Filtering - Update pre and post stack application using reference time explaining it works on stacks and pre-stack gathers</span></li><li><span>Inverse Q Filtering - Preferred workflow for amplitude Q-compensation, pre-or post stack?<br /></span></li><li><span>Inverse Q Filtering - Do we update contracts/bid workflow, post-stack or pre-stack by default?&#160;&#160; <br /></span></li><li><span>Inverse Q Filtering - Consider paper on AVA preservation below?&#160;</span></li><li><span>Inverse Q Filtering - Update ticket below and close out with actions for software team&#160;</span></li><li><span>Inverse Q - Filtering - Feedback to Greg and additional QC to consider while testing further&#160;<br /></span></li><li><span>Inverse Q - Filtering -&#160;</span>Q analysis via <span class="s1" style="color: rgb(8,8,7);">phase</span><span> variation across octaves - email thread from Greg additional QC - need to investigate when we get time</span></li><li><span>Inverse Q - Filtering - Update help and best practices - Action from ticket below&#160;<a class="external-link" href="https://downunder.zendesk.com/agent/tickets/186456" rel="nofollow">https://downunder.zendesk.com/agent/tickets/186456</a>&#160;</span></li></ul><p>In our code there is a term in the amplitude part of the filter that is dependent on the dominant frequency.<br />It is of the form (w/w0)^gamma where w is the frequency, w0 the dominant (or reference) frequency and gamma= 1/(pi*q)<br />The dependence on w0 is pretty weak.</p><p>For reference, Wang,Y (GeoPhys Vol 71, No 3, ppV51-V60, 2006)<br />Eqn (4) shows the (w/wh)^gamma term on the amplitude and phase part.</p><p>Gary suggests that this is compensation for the frequency dependence of the velocity used to convert depth to time.</p><p><br /></p><p><br /></p><p><em>------------------------------</em></p><p><em>Extended Inverse Q&#160;phase&#160;QC showing alignment of peak amplitude time-shifts for a specific target horizon using Octave freq band QC..&#160;<span style="letter-spacing: 0.0px;">These are all sub-sample time-shift differences between low-high Octave bands and for a specific target depth and horizon spatial extent.</span></em></p><p><span><br class="_mce_tagged_br" /></span></p><p><u>-------------------------&#160;</u></p><p><u><a class="external-link" href="https://downunder.zendesk.com/agent/tickets/168156" rel="nofollow">https://downunder.zendesk.com/agent/tickets/168156</a></u></p><p>-------------------------------------------------------------------</p><p><strong>Make the help (the introduction section at the top) more explicit in stating that this is ok for both gathers and stacks.</strong></p><ul><li>Agree with changing the help description to state that this is ok for both gathers and stacks.</li><li>Need to update best practice if not a clear message..</li></ul><p></p><p><strong>Noting that pre-stack is the most correct methodology due to being able to honour offset and hence variable ray paths through the earth.</strong></p><ul><li>The ray-tracing option is soon to land, best practice and help should be adjusted then.</li><li>Phase only pre-migration is good.</li><li>How we apply the post-migration amplitude Q is still in discussion within the AG team and needs to be aligned with bids also.</li><li>Need to have a clear message on this point.</li></ul><p></p><p><strong>Discussion point:</strong><br /><em>AVA Friendly Q Amplitude Compensation<br />E. Clark Trantham* and Kuang He (ExxonMobil Upstream Research Company)</em></p><p></p><p><strong>The worse thing that people can do is apply Q correction to angle stacks - completely wrong - hence, if at all possible they should do it pre-stack.</strong></p><p>Remove the information in the help about the equivalent workflow under reference time correction</p><ul><li>This is covered in the best practice..</li><li>Personally I would still like the water bottom time in the seismic header before application, so its QC'd correctly etc.</li></ul><p><span><br /></span></p><p><span><br /></span></p><p><span><br /></span></p><p><span class="confluence-embedded-file-wrapper conf-macro output-inline"><a class="confluence-embedded-file" href="Resources/Images/AVA Friendly Q Amplitude Compensation_trantham2017_XOM.pdf" aria-label="AVA Friendly Q Amplitude Compensation_trantham2017_XOM.pdf"><img src="https://confluence.dug.com/rest/documentConversion/latest/conversion/thumbnail/155354537/1" height="250" /></a></span></p><p><br /></p><ul class="inline-task-list"><li>VSP Q - processing and estimation -&#160;<a class="confluence-userlink user-mention" href="https://confluence.dug.com/display/~bjornm">Bjorn Muller</a></li></ul><p>There is no factor of two difference between seismic and VSP Q estimation.</p><p>On the VSP you calculate it on one way time so if you think about it for seismic where your windows are in two way time the amplitude spectrum should reflect that extra travel time so you will observe a different slope (compared with the VSP) which when combined with the twt should give you the same Q.</p><p>Where I do see a problem is when you take a typical Corridor stack in TWT and try to match that to your seismic you will have a mismatch because the twt does not reflect the true travel path and hence the attenuation in the VSP.</p><p>cheers</p><p>ps. One other thing to watch out for is whether the equation you use uses frequency or angular frequency. Angular frequency will have a 2 in the denominator. (which cancels with the 2 in the numerator)</p><p><br /></p><p><br /></p><p><br /></p><p><br /></p><p><br /></p><p><br /></p></body>
</html>